## 2.3.2 애플리케이션 계층을 처리하는 기기

### L7 스위치
- TCP/IP + URL을 포함
- 로드 밸런서라고도 함
- 클라이언트로부터 오는 요청들을 뒤쪽의 여러 서버로 나눠 서버의 부하를 분산
- 시스템이 처리할 수 있는 트래픽 증가를 목표 
- URL, 서버, 캐시, 쿠키들 분석해 트래픽을 분산
- 바이러스, 불필요한 외부 데이터 등을 걸러내는 필터링 기능
- 응용 프로그램 수준의 트래픽 모니터링도 가능
- 정기적인 헬스 체크를 통해 서버의 장애를 감지, 트래픽 분산 대상에서 제외
- 웹 방화벽, 보안 스위치로 주로 이용

### L4 스위치
- TCP/IP + Session을 기반으로 패킷의 라우팅 및 로드밸런싱 (부하 분산)

#### L4 스위치와 L7 스위치의 차이
- L4 스위치 역시 로드 밸런서
- L4 스위치는 인터넷 계층을 처리하는 기기로 스트리밍 관련 서비스에서는 사용 불가, IP와 포트를 기반으로 트래픽 분산
- L7 스위치는 IP와 포트 외에도 URL, HTTP 헤더, 쿠키 등을 기반으로 트래픽 분산

#### 헬스 체크 Health Check
- 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내 서버의 정상 여부를 판별하는 것
- L4, L7 스위치 모두 헬스 체크 사용

#### 서버 이중화 (부하 분산)
- 로드 밸런서의 대표적인 기능
- 2대 이상의 서버를 기반으로 가상 IP를 제공해 안정적인 서비스를 제공
- 서버 로드밸런싱(SLB), 방화벽 로드 밸런싱(FWLB), VPN 로드 밸런싱(VPNLB), 네트워크 로드 밸런싱 (NLB)
- 로드밸런싱 방식
  - Hash: 클라이언트와 서버 사이 연결된 세션을 계속해서 유지
  - Round Robin: 연동된 서버들에 순차적으로 분산
  - Least Connection: 연동된 서버의 세션 수를 확인, 가장 적은 세션이 연결된 서버로 분산
  - Response Time: 연동된 서버의 응답 시간을 기준으로, 가장 응답이 빠른 서버로 우선 분배
- WEB/WAS를 이중화/다중화 할 때 사용