## 3.1.1 운영체제의 역할과 구조

### 운영체제의 역할

1. CPU 스케쥴링과 프로세스 관리
    - CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환 관리
2. 메모리 관리
    - 한정된 메모리를 어떤 프로세스에 얼만큼 할당할지 관리
3. 디스크 파일 관리
    - 디스크 파일을 어떤 방법으로 보관할지 관리
4. I/O 디바이스 관리
    - I/O 디바이스들인 마우스, 키보드와 컴퓨터 간 데이터를 주고받는 것을 관리

### 운영체제의 구조

- 유저 프로그램 > GUI > 시스템콜 > 커널 > 드라이버 > 하드웨어
- GUI부터 드라이버까지를 OS라고 함

### 커널 Kernel

- OS의 핵심 부분으로, 컴퓨터 자원을 관리
- 시스템 콜을 통해 컴퓨터 자원을 사용할수 있게 해주는 자원 관리자
- 유저와의 직접적인 상호작용을 위해 `쉘 Shell (명령어 해석기)` 과 같은 프로그램을 제공
- 보안, 메모리, 프로세스, 파일 시스템, IO 디바이스, IO 요청 관리 등 역할

### 커널모드와 유저모드

- OS는 시스템을 보호하기 위해 커널 모드와 유저모드로 나뉘어 구동되며, 프로그램을 실행 할 때 많은 부분이 커널 모드를 사용
- `커널 모드 Kernel Mode`: 모든 컴퓨터 자원에 접근할 수 있는 모드
- `유저 모드 User Mode`:  컴퓨터 자원에 제한적으로 접근할 수 있는 모드

### 시스템 콜 (System Call, 시스템 호출)

- 커널 영역의 기능을 유저 모드에서 사용할 수 있도록 하는 인터페이스로, 하나의 추상화 계층
- 프로세스나 스레드가 OS의 서비스 (커널 함수)를 호출할 때 사용
- 유저 프로그램의 I/O 요청으로 트랩 trap을 발동하면, 올바른 요청인지 확인 후 유저 모드가 시스템콜을 통해 커널 모드로 변환되어 실행
- 네트워크 통신이나 DB와 같은 낮은 단계의 영역 처리에 대한 부분을 신경쓰지 않고 프로그램 구현 가능
- modebit
    - 커널 모드 (0)과 유저 모드 (1)을 구분할 수 있는 플래그 변수
    - 시스템콜 실행 시 이 값을 참고해 유저모드와 커널 모드를 구분
    - 시스템콜 실행 전 값을 변경 (1 → 0)하고, 실행 후 원복 (0 →  1)