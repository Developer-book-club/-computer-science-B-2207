## 프로세스의 메모리 구조

변수들은 컴파일 단계에서 메모리 공간을 할당받거나(정적할당), 런타임 단계에서 할당(동적할당) 받는다. 이때 할당되는 메모리 공간은 정적영역과 동적영역으로 나누어진다.

동적할당되는 변수는 동적 영역을 할당받는다.

정적할당되는 변수 중에서도

### 동적 영역

- 스택

  - 지역변수, 매개변수, 함수 저장
  - 컴파일 시에 크기가 결정되지만 동적으로 늘어날 수 있다.
  - 동적 크기 증가를 위해 힙과 스택 사이의 공간은 비워져있다.
  - 함수의 재귀호출시 크기가 늘어난다.

- 힙
  - 동적할당시 사용된다 (malloc)
  - 런타임시에 크기가 결정된다.

### 정적 영역

- 데이터 영역

  - 전역변수, 정적변수 저장.
  - BSS영역과 Data영역으로 나누어진다. BSS영역에는 초기화가 되지 않은 변수가 0으로 초기화되어 저장되고, Data 영역에는 다른 값으로 할당된 변수들이 저장된다.
  - 따라서 전역변수와 정적변수는 직접 초기화하지 않아도 0으로 자동초기화된다. 반면, Stack영역에 저장되는 지역변수나 매개변수는 직접 초기화해주어야 한다.

- 코드 영역
  - 함수와 상수 저장.

```c
// 1. 동적영역을 동적으로 할당 => 힙에 저장
#include <stdlib.h>

int N;
int *arr1;
scanf("%d", &N);
arr1 = (int *)malloc(sizeof(int) * N);

...

free(arr1);

// 2. 정적 영역을 정적으로 할당 => 데이터영역에 저장, 실행 도중 해제 불가능.
int arr2[100000] = {0, };  // 전역변수

void main(void) {
    ...
}

// 3. 동적 영역을 정적으로 할당 => 스택에 저장, 실행 도중 해제 가능.
void main(void) {
    int arr2[100000] = {0, };  // 지역변수
    return 0;
}
```
