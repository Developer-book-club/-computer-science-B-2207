## 3.3.4 PCB (Process Control Block, 프로세스 제어 블록)

### PCB
- OS에서 프로세스를 제어하기 위한 상태 정보 (메타데이터)를 저장한 구조체로, 연결 리스트로 저장
- 프로그램이 실행되면 프로세스에 관한 데이터가 PCB에 저장되고, 프로세스 종료 시 해당 PCB가 리스트에서 제거
- 컨텍스트 스위칭시 PCB를 참조, 이전에 실행됐던 부분부터 다시 실행 가능
- 프로세스의 중요한 정보를 포함하고 있기에 일반 사용자가 접근하지 못하도록 커널 스택의 가장 앞부분에서 관리
- 구조
    - 프로세스 스케쥴링 상태: 프로세스가 CPU 소유권을 얻은 이후의 상태
    - 프로세스 ID: 프로세스 ID와 자식 프로세스 ID
    - 프로세스 권한: 컴퓨터 자원 또는 IO 디바이스에 대한 권한 정보
    - 프로그램 카운터: 프로세스에서 실행해야 할 다음 명령어의 주소에 대한 포인터
    - CPU 레지스터: 프로세스를 실행하기 저장해야 할 레지스터에 대한 정보
    - CPU 스케쥴링 정보: CPU 스케쥴러에 의해 중단된 시간 등에 대한 정보
    - 계정 정보: 프로세스 실행에 사용된 CPU 사용량, 실행한 유저의 정보
    - I/O 상태 정보: 프로세스에 할당된 IO 디바이스 목록
### 컨텍스트 스위칭 Context Switching
  - 하나의 CPU 가 이전의 프로세스 상태를 PCB에 저장하고, 다른 프로세스의 정보를 PCB에서 읽어 레지스터에 적재하는 과정 (프로세스의 상태 변경)
  - 한 프로세스에 할당된 시간이 끝나거나 인터럽트에 의해 발생
  - 컨텍스트 스위칭 과정에서 유휴 시간 idle time이 발생
  - 캐시미스
      - 컨텍스트 스위칭 과정에서 프로세스가 가지고 있는 메모리 주소가 그대로 있으면 잘못된 주소 변환이 발생, 캐시 클리어 과정을 겪기에 발생
      - 컨텍스트 스위칭에 드는 비용
  - 스레드에서 컨텍스트 스위칭
      - 스레드는 스택 영역을 제외한 모든 메모리를 공유하기에 스레드 컨텍스트 스위칭의 경우 비용이 더 적고 시간도 적게 걸림